<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>homework11</title>
        <body>
            <script>
                const getSum = (a, b) => a + b;

                function makeCaching(f) {
                    const cache = [];
                    return function (...args) {
                        const newItem = {
                            arguments: args,
                            result: f(...args),
                        };

                        const isCorrect = (value, index) => value === args[index];

                        const argumentsCheck = cache.find((i) => i.arguments.every(isCorrect));

                        if (argumentsCheck) {
                            return argumentsCheck.result;
                        }

                        if (cache.length >= 10) {
                            cache.shift();
                            cache.push(newItem);
                            return newItem.result;
                        }

                        cache.push(newItem);
                        return newItem.result;
                    };
                }
                
                cachingSum = makeCaching(getSum);
                console.log(
                    cachingSum(1, 1),
                    cachingSum(1, 2),
                    cachingSum(1, 3),
                    cachingSum(1, 4),
                    cachingSum(1, 4),
                    cachingSum(1, 4),
                    cachingSum(2, 1),
                    cachingSum(2, 2),
                    cachingSum(2, 2),
                    cachingSum(3, 1),
                    cachingSum(3, 2),
                    cachingSum(3, 3),
                    cachingSum(3, 4),
                    cachingSum(3, 5),
                    cachingSum(3, 7),
                    cachingSum(3, 7)
                );
            </script>
        </body>
    </head>
</html>
